<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>jQuery UI Autocomplete - Categories</title>
  <link rel="stylesheet" href="jquery-ui.css">
  <script src="jquery-1.11.3.js"></script>
  <script src="jquery-ui.js"></script>
  <link rel="stylesheet" href="style.css">
</head>
<body>
	<div class="searchLabel">
		<label for="search" class="dream-orphans">Search: </label> 
	</div>

	<div class="searchBox">
		<input type="text" placeholder="type any country you want to search" id="search">
	</div>


	<script>

		$.widget("custom.catcomplete", $.ui.autocomplete, {
			_create: function() {
				this._super();
				this.widget().menu("option", "items", "> :not(.ui-autocomplete-category)");
			},
			_renderMenu: function(ul, items) {
				var that = this,
					currentCategory = "";
				$.each(items, function(index, item) {
					var li;
					if (item.category != currentCategory) {
						ul.append("<li class='ui-autocomplete-category red'>" + item.category + "</li>");
						currentCategory = item.category;
					}
					li = that._renderItemData(ul, item);
					if (item.category) {
						li.attr("aria-label", item.category + " : " + item.label);
					}
				});
			}
		});

		
		// Data is obtained from http://ourairports.com/data/ in csv format
		// data is the variable to store our 246 list of countries and each corresponding continent/region
		var data = [
		  { label:"Andorra", category:"Europe" },
		  { label:"United Arab Emirates", category:"Asia" },
		  { label:"Afghanistan", category:"Asia" },
		  { label:"Antigua and Barbuda", category:"North America" },
		  { label:"Anguilla", category:"North America" },
		  { label:"Albania", category:"Europe" },
		  { label:"Armenia", category:"Asia" },
		  { label:"Angola", category:"Africa" },
		  { label:"Antarctica", category:"Antartica" },
		  { label:"Argentina", category:"South America" },
		  { label:"American Samoa", category:"Oceania" },
		  { label:"Austria", category:"Europe" },
		  { label:"Australia", category:"Oceania" },
		  { label:"Aruba", category:"North America" },
		  { label:"Azerbaijan", category:"Asia" },
		  { label:"Bosnia and Herzegovina", category:"Europe" },
		  { label:"Barbados", category:"North America" },
		  { label:"Bangladesh", category:"Asia" },
		  { label:"Belgium", category:"Europe" },
		  { label:"Burkina Faso", category:"Africa" },
		  { label:"Bulgaria", category:"Europe" },
		  { label:"Bahrain", category:"Asia" },
		  { label:"Burundi", category:"Africa" },
		  { label:"Benin", category:"Africa" },
		  { label:"Saint Barthelemy", category:"North America" },
		  { label:"Bermuda", category:"North America" },
		  { label:"Brunei", category:"Asia" },
		  { label:"Bolivia", category:"South America" },
		  { label:"Caribbean Netherlands", category:"North America" },
		  { label:"Brazil", category:"South America" },
		  { label:"Bahamas", category:"North America" },
		  { label:"Bhutan", category:"Asia" },
		  { label:"Botswana", category:"Africa" },
		  { label:"Belarus", category:"Europe" },
		  { label:"Belize", category:"North America" },
		  { label:"Canada", category:"North America" },
		  { label:"Cocos (Keeling) Islands", category:"Asia" },
		  { label:"Congo (Kinshasa)", category:"Africa" },
		  { label:"Central African Republic", category:"Africa" },
		  { label:"Congo (Brazzaville)", category:"Africa" },
		  { label:"Switzerland", category:"Europe" },
		  { label:"Cote d'Ivoire", category:"Africa" },
		  { label:"Cook Islands", category:"Oceania" },
		  { label:"Chile", category:"South America" },
		  { label:"Cameroon", category:"Africa" },
		  { label:"China", category:"Asia" },
		  { label:"Colombia", category:"South America" },
		  { label:"Costa Rica", category:"North America" },
		  { label:"Cuba", category:"North America" },
		  { label:"Cape Verde", category:"Africa" },
		  { label:"Curacao", category:"North America" },
		  { label:"Christmas Island", category:"Asia" },
		  { label:"Cyprus", category:"Asia" },
		  { label:"Czech Republic", category:"Europe" },
		  { label:"Germany", category:"Europe" },
		  { label:"Djibouti", category:"Africa" },
		  { label:"Denmark", category:"Europe" },
		  { label:"Dominica", category:"North America" },
		  { label:"Dominican Republic", category:"North America" },
		  { label:"Algeria", category:"Africa" },
		  { label:"Ecuador", category:"South America" },
		  { label:"Estonia", category:"Europe" },
		  { label:"Egypt", category:"Africa" },
		  { label:"Western Sahara", category:"Africa" },
		  { label:"Eritrea", category:"Africa" },
		  { label:"Spain", category:"Europe" },
		  { label:"Ethiopia", category:"Africa" },
		  { label:"Finland", category:"Europe" },
		  { label:"Fiji", category:"Oceania" },
		  { label:"Falkland Islands", category:"South America" },
		  { label:"Micronesia", category:"Oceania" },
		  { label:"Faroe Islands", category:"Europe" },
		  { label:"France", category:"Europe" },
		  { label:"Gabon", category:"Africa" },
		  { label:"United Kingdom", category:"Europe" },
		  { label:"Grenada", category:"North America" },
		  { label:"Georgia", category:"Asia" },
		  { label:"French Guiana", category:"South America" },
		  { label:"Guernsey", category:"Europe" },
		  { label:"Ghana", category:"Africa" },
		  { label:"Gibraltar", category:"Europe" },
		  { label:"Greenland", category:"North America" },
		  { label:"Gambia", category:"Africa" },
		  { label:"Guinea", category:"Africa" },
		  { label:"Guadeloupe", category:"North America" },
		  { label:"Equatorial Guinea", category:"Africa" },
		  { label:"Greece", category:"Europe" },
		  { label:"South Georgia and the South Sandwich Islands", category:"Antartica" },
		  { label:"Guatemala", category:"North America" },
		  { label:"Guam", category:"Oceania" },
		  { label:"Guinea-Bissau", category:"Africa" },
		  { label:"Guyana", category:"South America" },
		  { label:"Hong Kong", category:"Asia" },
		  { label:"Honduras", category:"North America" },
		  { label:"Croatia", category:"Europe" },
		  { label:"Haiti", category:"North America" },
		  { label:"Hungary", category:"Europe" },
		  { label:"Indonesia", category:"Asia" },
		  { label:"Ireland", category:"Europe" },
		  { label:"Israel", category:"Asia" },
		  { label:"Isle of Man", category:"Europe" },
		  { label:"India", category:"Asia" },
		  { label:"British Indian Ocean Territory", category:"Asia" },
		  { label:"Iraq", category:"Asia" },
		  { label:"Iran", category:"Asia" },
		  { label:"Iceland", category:"Europe" },
		  { label:"Italy", category:"Europe" },
		  { label:"Jersey", category:"Europe" },
		  { label:"Jamaica", category:"North America" },
		  { label:"Jordan", category:"Asia" },
		  { label:"Japan", category:"Asia" },
		  { label:"Kenya", category:"Africa" },
		  { label:"Kyrgyzstan", category:"Asia" },
		  { label:"Cambodia", category:"Asia" },
		  { label:"Kiribati", category:"Oceania" },
		  { label:"Comoros", category:"Africa" },
		  { label:"Saint Kitts and Nevis", category:"North America" },
		  { label:"North Korea", category:"Asia" },
		  { label:"South Korea", category:"Asia" },
		  { label:"Kosovo", category:"Europe" },
		  { label:"Kuwait", category:"Asia" },
		  { label:"Cayman Islands", category:"North America" },
		  { label:"Kazakhstan", category:"Asia" },
		  { label:"Laos", category:"Asia" },
		  { label:"Lebanon", category:"Asia" },
		  { label:"Saint Lucia", category:"North America" },
		  { label:"Liechtenstein", category:"Europe" },
		  { label:"Sri Lanka", category:"Asia" },
		  { label:"Liberia", category:"Africa" },
		  { label:"Lesotho", category:"Africa" },
		  { label:"Lithuania", category:"Europe" },
		  { label:"Luxembourg", category:"Europe" },
		  { label:"Latvia", category:"Europe" },
		  { label:"Libya", category:"Africa" },
		  { label:"Morocco", category:"Africa" },
		  { label:"Monaco", category:"Europe" },
		  { label:"Moldova", category:"Europe" },
		  { label:"Montenegro", category:"Europe" },
		  { label:"Saint Martin", category:"North America" },
		  { label:"Madagascar", category:"Africa" },
		  { label:"Marshall Islands", category:"Oceania" },
		  { label:"Macedonia", category:"Europe" },
		  { label:"Mali", category:"Africa" },
		  { label:"Burma", category:"Asia" },
		  { label:"Mongolia", category:"Asia" },
		  { label:"Macau", category:"Asia" },
		  { label:"Northern Mariana Islands", category:"Oceania" },
		  { label:"Martinique", category:"North America" },
		  { label:"Mauritania", category:"Africa" },
		  { label:"Montserrat", category:"North America" },
		  { label:"Malta", category:"Europe" },
		  { label:"Mauritius", category:"Africa" },
		  { label:"Maldives", category:"Asia" },
		  { label:"Malawi", category:"Africa" },
		  { label:"Mexico", category:"North America" },
		  { label:"Malaysia", category:"Asia" },
		  { label:"Mozambique", category:"Africa" },
		  { label:"Namibia", category:"Africa" },
		  { label:"New Caledonia", category:"Oceania" },
		  { label:"Niger", category:"Africa" },
		  { label:"Norfolk Island", category:"Oceania" },
		  { label:"Nigeria", category:"Africa" },
		  { label:"Nicaragua", category:"North America" },
		  { label:"Netherlands", category:"Europe" },
		  { label:"Norway", category:"Europe" },
		  { label:"Nepal", category:"Asia" },
		  { label:"Nauru", category:"Oceania" },
		  { label:"Niue", category:"Oceania" },
		  { label:"New Zealand", category:"Oceania" },
		  { label:"Oman", category:"Asia" },
		  { label:"Panama", category:"North America" },
		  { label:"Peru", category:"South America" },
		  { label:"French Polynesia", category:"Oceania" },
		  { label:"Papua New Guinea", category:"Oceania" },
		  { label:"Philippines", category:"Asia" },
		  { label:"Pakistan", category:"Asia" },
		  { label:"Poland", category:"Europe" },
		  { label:"Saint Pierre and Miquelon", category:"North America" },
		  { label:"Pitcairn", category:"Oceania" },
		  { label:"Puerto Rico", category:"North America" },
		  { label:"Palestinian Territory", category:"Asia" },
		  { label:"Portugal", category:"Europe" },
		  { label:"Palau", category:"Oceania" },
		  { label:"Paraguay", category:"South America" },
		  { label:"Qatar", category:"Asia" },
		  { label:"Reunion", category:"Africa" },
		  { label:"Romania", category:"Europe" },
		  { label:"Serbia", category:"Europe" },
		  { label:"Russia", category:"Europe" },
		  { label:"Rwanda", category:"Africa" },
		  { label:"Saudi Arabia", category:"Asia" },
		  { label:"Solomon Islands", category:"Oceania" },
		  { label:"Seychelles", category:"Africa" },
		  { label:"Sudan", category:"Africa" },
		  { label:"Sweden", category:"Europe" },
		  { label:"Singapore", category:"Asia" },
		  { label:"Saint Helena", category:"Africa" },
		  { label:"Slovenia", category:"Europe" },
		  { label:"Slovakia", category:"Europe" },
		  { label:"Sierra Leone", category:"Africa" },
		  { label:"San Marino", category:"Europe" },
		  { label:"Senegal", category:"Africa" },
		  { label:"Somalia", category:"Africa" },
		  { label:"Suriname", category:"South America" },
		  { label:"South Sudan", category:"Africa" },
		  { label:"Sao Tome and Principe", category:"Africa" },
		  { label:"El Salvador", category:"North America" },
		  { label:"Sint Maarten", category:"North America" },
		  { label:"Syria", category:"Asia" },
		  { label:"Swaziland", category:"Africa" },
		  { label:"Turks and Caicos Islands", category:"North America" },
		  { label:"Chad", category:"Africa" },
		  { label:"French Southern Territories", category:"Antartica" },
		  { label:"Togo", category:"Africa" },
		  { label:"Thailand", category:"Asia" },
		  { label:"Tajikistan", category:"Asia" },
		  { label:"Tokelau", category:"Oceania" },
		  { label:"Timor-Leste", category:"Asia" },
		  { label:"Turkmenistan", category:"Asia" },
		  { label:"Tunisia", category:"Africa" },
		  { label:"Tonga", category:"Oceania" },
		  { label:"Turkey", category:"Asia" },
		  { label:"Trinidad and Tobago", category:"North America" },
		  { label:"Tuvalu", category:"Oceania" },
		  { label:"Taiwan", category:"Asia" },
		  { label:"Tanzania", category:"Africa" },
		  { label:"Ukraine", category:"Europe" },
		  { label:"Uganda", category:"Africa" },
		  { label:"United States Minor Outlying Islands", category:"Oceania" },
		  { label:"United States", category:"North America" },
		  { label:"Uruguay", category:"South America" },
		  { label:"Uzbekistan", category:"Asia" },
		  { label:"Vatican City", category:"Europe" },
		  { label:"Saint Vincent and the Grenadines", category:"North America" },
		  { label:"Venezuela", category:"South America" },
		  { label:"British Virgin Islands", category:"North America" },
		  { label:"U.S. Virgin Islands", category:"North America" },
		  { label:"Vietnam", category:"Asia" },
		  { label:"Vanuatu", category:"Oceania" },
		  { label:"Wallis and Futuna", category:"Oceania" },
		  { label:"Samoa", category:"Oceania" },
		  { label:"Yemen", category:"Asia" },
		  { label:"Mayotte", category:"Africa" },
		  { label:"South Africa", category:"Africa" },
		  { label:"Zambia", category:"Africa" },
		  { label:"Zimbabwe", category:"Africa" },
		  { label:"Unknown", category:""}
		]	

		function split( val ) {
      		return val.split( /,\s*/ );
    	}

    	function extractLast( term ) {
      		return split( term ).pop();
   		}

   	    $( "#search" )
	      // don't navigate away from the field on tab when selecting an item
	      .bind( "keydown", function( event ) {
	        if ( event.keyCode === $.ui.keyCode.TAB &&
	            $( this ).catcomplete( "instance" ).menu.active ) {
	          event.preventDefault();
	        }
	      })
	      .catcomplete({
	        minLength: 0,
	        source: function( request, response ) {
	          // delegate back to catcomplete, but extract the last term
	          response( $.ui.autocomplete.filter(
	            data, extractLast( request.term ) ) );
	        },
	        focus: function() {
	          // prevent value inserted on focus
	          return false;
	        },
	        select: function( event, ui ) {
	          var terms = split( this.value );
	          // remove the current input
	          terms.pop();
	          // add the selected item
	          terms.push( ui.item.value );
	          // add placeholder to get the comma-and-space at the end
	          terms.push( "" );
	          this.value = terms.join( ", " );
	          return false;
	        }
          });
  	

		// $(function() {
		// 	$("#search").catcomplete({
		// 		delay: 0,
		// 		source: data
		// 	});
		// });
	</script>
 
</body>
</html>
